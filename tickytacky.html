<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8">
    <title>Martin Maza | Ticky Tacky App</title>
        <meta name="description" content="">
        <link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>

        <link rel="icon" type="image/png" sizes="16x16" href="img/android-icon-192x192.png"> 

        <link rel="stylesheet" href="css/normalize.css">
        <!-- <link rel="stylesheet" href="css/style.css">   -->
        <style>
        /*===========================================
General Styles
=============================================*/

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  outline: none;
  background-repeat: no-repeat;
}

html{
  /*position: relative;*/
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  height: 100vh;
  margin: 0 auto; /*all our rows will be centered*/
  background-image: linear-gradient(27deg, #151515 5px, transparent 5px),url('http://www.aestheticmovement.com/wp-content/themes/am/images/chalkboard.1440x900.jpg');
  background-repeat: no-repeat;
  background-size: cover;
  background-position: 50% 50%;
  background-attachment: fixed;
}
.container {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: space-between;
}
/*===========================================
headers
=============================================*/
h1 {
  font-family: 'Poiret One', cursive;
  font-size: 600%;
  color: RGBa(255,255,153,.6);
  text-align: center;
  margin: .20em 0 0 0;
}
h1 span{
  color: rgba(243,242,242,.6);
}


.gameboard{
  display: flex;
  align-items     : center;
  justify-content : center;
  vertical-align  : center;
  flex-wrap       : wrap;
  align-content   : center;
  width   : 300px;
  height  : 300px;
  position: absolute;
  top: 58%;
  left: 52%;
  transform: translate(-50%, -50%);
}
.column{
  display         : flex;
  flex-direction  : column;
  justify-content : space-between;
}
.square {
    display : block;
    width   : 100px;
    height  : 100px;
    border  : 5px solid rgba(246, 244, 241, .6);
    transition: opacity .40s ease-in-out;
    transition-property: background, border-radius, color;
    color       : #e4e4e4;
    font-size   : 5em;
    font-weight : 100;
    text-align  : center;
    padding     : 4px;
  }

  .square:hover {
    background: grey;
    opacity: 0.2;
    border-radius: .5em;
  }

.square:active {
  background: black;
}

/*===========================================
X-O ICON BUTTONS
=============================================*/
.btn-icon{
 text-align: center;
 margin-left: 49%;
}
button {
   float: left;
}

button:first-child {
    margin-right: 5px;
}

button{
  text-align: center;
  border-bottom: 10px solid #34495e;
  transition-property: border-bottom .6s linear 0s;
  background: rgba(23,114,69, .6);
  font-size: 150%;
  text-align: center;
  margin: 0 auto;
  /*width: 5%;*/
  height: 2em;
  display: inline-block;
  color: white;
      vertical-align: middle;
    display: block;
    width: 5%;
    margin: 0 auto;


}

/*===========================================
Instructions
=============================================*/
.instructions{
  /*margin-top: 40px;*/
  margin-left: 2%;
  font-family: Tahoma, Geneva, sans-serif;
  font-weight: 200;
  font-size: 120%;
  color: rgba(14,239,158, .6);
  float: left;
  position: absolute;
  width: 34%;
  height: 60%; 
}
.instructions h2{
  font-size: 170%;
  font-family: 'Poiret One', cursive;
  text-align: center;
  text-decoration: underline;
}
.instructions p{
   text-align: justify;
   text-justify: inter-word;
}
.instructions ul {
    list-style: outside disc;
    margin-left: 1em;
    padding-top: 1em;
}
.instructions li {
    position: relative;
    left: 1em;
    padding-right: 1em;  
    line-height: 1.5; 
    padding-right: 3.5em; 
}


/*===========================================
Scoreboard
=============================================*/
.scoreboard {
  float: right;
  color: rgba(255,235,127, .6);
  font-family: 'Poiret One', cursive;
  font-size: 170%;
  margin-right: 10%;
  line-height: 1.5;
}
.scoreboard h2 {
  border-bottom: solid 2px rgba(255, 102, 0, .6);
  display: inline;
  padding-bottom: 3px;

}
.scoreboard span {
  font-family: Palatino, 'Palatino Linotype', serif;
  color: rgba(255, 102, 0, .6);
}
        </style>
  </head>
    <body>
    <h1>Ticky <span>Tacky</span></h1>
    <div id="container">
      <div class="btn-icon">
          <button class="btns"id="exes" onclick="selectX()">X</button>
          <button class="btns"id='ohs' onclick="selectO()">O</button>
      </div>
      <div class="gameboard">
          <div class="column">
            <div class="square"></div>
            <div class="square"></div>
            <div class="square"></div>
          </div><!-- end of column -->

          <div class="column">
            <div class="square"></div>
            <div class="square"></div>
            <div class="square"></div>
          </div><!-- end of column -->

          <div class="column">
            <div class="square"></div>
            <div class="square"></div>
            <div class="square"></div>
          </div><!-- end of column -->
      </div><!-- end of gameboard -->
      <div class="instructions"> 
        <h2>Rules:</h2>
        <p>The goal of Ticky Tacky is to get three in a row. 
          <ul>
            <li>
              Player 1 choses and icon and Player 2/Computer choses one.
            </li>
            <li>
              Players take turns placing their icons on the game board.
            </li>
            <li>
              Player 1 always goes first, and in the event that no one has three in a row, the stalemate is called a cat's game.
            </li>
          </ul>
        </p>
      </div>
      <div class="scoreboard">
        <h2>Scoreboard:</h2>
        <p>Player 1 score: <span id="p1score">0</span></p>
        <p>Player 2 score: <span id="p2score">0</span></p>
      </div><!-- end of scoreboard -->
    </div><!-- end of container -->
        <!-- // <script src="js/script.js"></script> -->
        <script>
var nextTurn, p1icon, p2icon;
var p1turnCount = 0; 
var p2turnCount = 0;
var square = document.getElementsByClassName('square');
for( var i = 0; i<square.length; i++){
  square[i].squareVal=0;
  square[i].addEventListener('click', addIcon);
}
function selectX() {
  p1icon = document.getElementById('exes').innerHTML;
  p2icon = document.getElementById('ohs').innerHTML;
  nextTurn = p1icon;
  document.getElementById('ohs').disabled=true;
}
function selectO() {
  p1icon = document.getElementById('ohs').innerHTML;
  p2icon = document.getElementById('exes').innerHTML;
  nextTurn = p1icon;
  document.getElementById('exes').disabled=true;
}
function addIcon(){
  if(this.hasChildNodes()) {
    return;
  }
  else{
    if(p1icon === undefined || p2icon === undefined){
      alert('please select X or O first!');
      return;
    }
    if(nextTurn === p1icon && nextTurn !== undefined){

    this.innerHTML="<p class='marked'>" + nextTurn + "</p>";
      this.squareVal = 1;

    }
    changeTurn();
  }  
    checkWinner();
};
 function changeTurn(){
      if(nextTurn === p1icon){
          nextTurn = p2icon;
          p1turnCount += 1;
          p2turnCount += 1
          checkWinner();
          computerAI();
      } 
  }
function checkWinner() {
  var winningCombos = [
    [square[0].squareVal,square[1].squareVal,square[2].squareVal], 
    [square[3].squareVal,square[4].squareVal,square[5].squareVal], 
    [square[6].squareVal,square[7].squareVal,square[8].squareVal], 
    [square[0].squareVal,square[4].squareVal,square[8].squareVal], 
    [square[2].squareVal,square[4].squareVal,square[6].squareVal], 
    [square[0].squareVal,square[3].squareVal,square[6].squareVal], 
    [square[1].squareVal,square[4].squareVal,square[7].squareVal], 
    [square[2].squareVal,square[5].squareVal,square[8].squareVal]
  ];
  for(var j=0; j<8; j++){
    var checker = winningCombos[j].reduce(function(a,b){return a+b});
    var p1ScoreAdd = parseInt(document.getElementById('p1score').innerHTML);
    var p2ScoreAdd = parseInt(document.getElementById('p2score').innerHTML);
    if (checker === 3) {
      console.log(checker)
      p1ScoreAdd = p1ScoreAdd += 1;
      document.getElementById('p1score').innerHTML = p1ScoreAdd;
      alert("X Wins! The score is now:\n " + "Player 1 (X): " + p1ScoreAdd + "\n Player 2 (O): " + p2ScoreAdd);
      clearBoard();
      return
    };
    if(checker === -3) {
      console.log(checker)
      p2ScoreAdd = p2ScoreAdd += 1;
      document.getElementById('p2score').innerHTML = p2ScoreAdd;
      alert("O Wins! The score is now:\n " + "Player 2 (X): " + p2ScoreAdd + "\n Player 1 (X): " + p1ScoreAdd);
      clearBoard();
      return;
    };

    if((p1turnCount===5 || p2turnCount ===5) && (checker !==3 || checker !== -3)) { 
      alert('ITS A CATS GAME! MEOWWW')
      clearBoard();
      return;
    }
  }
}
function computerAI() {
  var random = (Math.floor(Math.random() * 9) + 1)-1;

  if(square[random].squareVal===0 && nextTurn === p2icon){
    square[random].innerHTML = p2icon;
    square[random].squareVal= -1;
    nextTurn = p1icon;
    return;
  }  
  if(square[random].squareVal !== 0 && nextTurn === p2icon){
    computerAI();
  }
}
function clearBoard() {
  for(var k = 0; k<square.length; k++){
    square[k].squareVal=0;
    square[k].innerHTML="";
    document.getElementById('exes').disabled=false;
    document.getElementById('ohs').disabled=false;
    p1turnCount = 0;
    p2turnCount = 0
  }
}
//analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78080891-1', 'auto');
  ga('send', 'pageview');


</script>
    <footer>
    </footer>
  </body>
</html>
